const _0x7dc29d=_0x1706;(function(_0xe66447,_0x590aa5){const _0xef9c11=_0x1706,_0x5ade18=_0xe66447();while(!![]){try{const _0xfd92c3=-parseInt(_0xef9c11(0xbe))/0x1*(parseInt(_0xef9c11(0xad))/0x2)+parseInt(_0xef9c11(0x93))/0x3*(-parseInt(_0xef9c11(0x85))/0x4)+parseInt(_0xef9c11(0xa6))/0x5+parseInt(_0xef9c11(0x9a))/0x6+parseInt(_0xef9c11(0x7e))/0x7+parseInt(_0xef9c11(0x8e))/0x8*(-parseInt(_0xef9c11(0xa0))/0x9)+parseInt(_0xef9c11(0x92))/0xa;if(_0xfd92c3===_0x590aa5)break;else _0x5ade18['push'](_0x5ade18['shift']());}catch(_0x4ef4a4){_0x5ade18['push'](_0x5ade18['shift']());}}}(_0xb309,0xf3324));const {ethers}=require(_0x7dc29d(0x8c)),{NETWORKS,ERC20_ABI,SWAP_ABI}=require(_0x7dc29d(0x86)),{checkBalance,approveToken,estimateGasFees}=require(_0x7dc29d(0x9d)),{colorText,COLORS}=require(_0x7dc29d(0xb1)),sleep=_0x4aa8d5=>new Promise(_0x3e838d=>setTimeout(_0x3e838d,_0x4aa8d5));function _0xb309(){const _0x2c44e7=['INSUFFICIENT_FUNDS','AbiCoder','RED','ethers','Transaction\x20timeout','8oatumN','uint256','plumeTestnet','defaultAbiCoder','16803910qhDVSE','56163wbmpHq','Retrying\x20swap\x20in\x203\x20seconds...','exchange','gasPrice','Swap\x20attempt\x20','\x20USDC\x20to\x20R2USD...','encodeFunctionData','5423466NpdvBx','arbitrumSepolia','Insufficient\x20USDC\x20balance.\x20You\x20have\x20','./sign','wait','sendTransaction','8211537xzccJc','insufficient\x20balance','Signer\x20had\x20insufficient\x20balance','USDC_ADDRESS','R2USD_ADDRESS','toString','2696110ljTwNa','address','error','GRAY','\x20failed:','\x20USDC.','Swapping\x20','2PAOmnq','GREEN','hash','/tx/','../utils/colors','Transaction\x20sent:\x20','Current\x20USDC\x20balance:\x20','decimals','interface','parseUnits','USDC_TO_R2USD_CONTRACT','networkKey','YELLOW','insufficient\x20funds','bscTestnet','Failed\x20to\x20swap\x20USDC\x20to\x20R2USD\x20after\x20all\x20retries:','\x20USDC\x20but\x20trying\x20to\x20swap\x20','315485yxdEfH','code','concat','7201243SZVCAS','exports','WHITE','sepolia','log','explorer','includes','412ReROiO','../config/config','message','Contract'];_0xb309=function(){return _0x2c44e7;};return _0xb309();}function _0x1706(_0x395efe,_0xd82c04){const _0xb309a2=_0xb309();return _0x1706=function(_0x170689,_0x256256){_0x170689=_0x170689-0x7c;let _0x28cd48=_0xb309a2[_0x170689];return _0x28cd48;},_0x1706(_0x395efe,_0xd82c04);}async function swapUSDCtoR2USD(_0x392563,_0x34ba74,_0x2454a7=0x5,_0x5c31d6=0x493e0){const _0x1673c4=_0x7dc29d;let _0x8d8859=0x0;while(_0x8d8859<=_0x2454a7){try{const {contracts:_0x3a45ac}=NETWORKS[_0x392563['networkKey']],_0x35677c=await checkBalance(_0x392563,_0x3a45ac[_0x1673c4(0xa3)]);console[_0x1673c4(0x82)]('\x20'+colorText(_0x1673c4(0xb3)+_0x35677c,COLORS['WHITE']));if(parseFloat(_0x35677c)<parseFloat(_0x34ba74))return console[_0x1673c4(0xa8)]('\x20'+colorText(_0x1673c4(0x9c)+_0x35677c+_0x1673c4(0xbd)+_0x34ba74+_0x1673c4(0xab),COLORS[_0x1673c4(0x8b)])),![];const _0x9d67a4=await approveToken(_0x392563,_0x3a45ac['USDC_ADDRESS'],_0x3a45ac['USDC_TO_R2USD_CONTRACT'],_0x34ba74);if(!_0x9d67a4)return![];const _0x44e4f5=new ethers[(_0x1673c4(0x88))](_0x3a45ac[_0x1673c4(0xa3)],ERC20_ABI,_0x392563),_0x3b59e4=await _0x44e4f5[_0x1673c4(0xb4)](),_0x197dee=ethers[_0x1673c4(0xb6)](_0x34ba74[_0x1673c4(0xa5)](),_0x3b59e4),_0x21b8a8=_0x197dee*0x61n/0x64n;let _0x21020d;if(_0x392563['networkKey']===_0x1673c4(0x81)||_0x392563['networkKey']===_0x1673c4(0x90)||_0x392563[_0x1673c4(0xb8)]===_0x1673c4(0xbb)||_0x392563[_0x1673c4(0xb8)]===_0x1673c4(0x9b))_0x21020d=ethers[_0x1673c4(0x7d)]([_0x3a45ac['USDC_TO_R2USD_METHOD_ID'],ethers[_0x1673c4(0x8a)][_0x1673c4(0x91)]()['encode'](['address',_0x1673c4(0x8f),'uint256',_0x1673c4(0x8f),_0x1673c4(0x8f),'uint256',_0x1673c4(0x8f)],[_0x392563[_0x1673c4(0xa7)],_0x197dee,0x0n,0x0n,0x0n,0x0n,0x0n])]);else{const _0x14aa4c=new ethers[(_0x1673c4(0x88))](_0x3a45ac[_0x1673c4(0xb7)],SWAP_ABI,_0x392563);_0x21020d=_0x14aa4c[_0x1673c4(0xb5)][_0x1673c4(0x99)](_0x1673c4(0x95),[0x1,0x0,_0x197dee,_0x21b8a8]);}console['log']('\x20'+colorText(_0x1673c4(0xac)+_0x34ba74+_0x1673c4(0x98),COLORS[_0x1673c4(0xb9)]));const _0x2f6032=await estimateGasFees(_0x392563['provider'],_0x392563['networkKey']);let _0x1c706b;_0x392563[_0x1673c4(0xb8)]==='bscTestnet'?_0x1c706b=await _0x392563[_0x1673c4(0x9f)]({'to':_0x3a45ac[_0x1673c4(0xb7)],'data':_0x21020d,'gasLimit':0x33450,'gasPrice':_0x2f6032[_0x1673c4(0x96)],'type':0x0}):_0x1c706b=await _0x392563[_0x1673c4(0x9f)]({'to':_0x3a45ac[_0x1673c4(0xb7)],'data':_0x21020d,'gasLimit':_0x392563['networkKey']===_0x1673c4(0x9b)?0x33450:0x33450,..._0x2f6032});console[_0x1673c4(0x82)]('\x20'+colorText(_0x1673c4(0xb2)+_0x1c706b['hash'],COLORS[_0x1673c4(0x80)])),console[_0x1673c4(0x82)]('\x20'+colorText('Check\x20on\x20explorer:\x20'+NETWORKS[_0x392563[_0x1673c4(0xb8)]][_0x1673c4(0x83)]+_0x1673c4(0xb0)+_0x1c706b[_0x1673c4(0xaf)],COLORS[_0x1673c4(0xa9)]));const _0x4cc881=new Promise((_0x58141a,_0x531192)=>{const _0x3b5439=_0x1673c4;setTimeout(()=>_0x531192(new Error(_0x3b5439(0x8d))),_0x5c31d6);});await Promise['race']([_0x1c706b[_0x1673c4(0x9e)](),_0x4cc881]),console[_0x1673c4(0x82)]('\x20'+colorText('Swap\x20confirmed!',COLORS[_0x1673c4(0xae)]));const _0x9147b0=await checkBalance(_0x392563,_0x3a45ac[_0x1673c4(0xa3)]),_0x21ff42=await checkBalance(_0x392563,_0x3a45ac[_0x1673c4(0xa4)]);return console[_0x1673c4(0x82)]('\x20'+colorText('New\x20USDC\x20balance:\x20'+_0x9147b0,COLORS[_0x1673c4(0x80)])),console[_0x1673c4(0x82)]('\x20'+colorText('New\x20R2USD\x20balance:\x20'+_0x21ff42,COLORS[_0x1673c4(0x80)])),!![];}catch(_0x3038ea){if(_0x3038ea[_0x1673c4(0x7c)]===_0x1673c4(0x89)||_0x3038ea[_0x1673c4(0x87)]&&(_0x3038ea[_0x1673c4(0x87)][_0x1673c4(0x84)](_0x1673c4(0xba))||_0x3038ea[_0x1673c4(0x87)][_0x1673c4(0x84)](_0x1673c4(0xa2))||_0x3038ea[_0x1673c4(0x87)]['includes'](_0x1673c4(0xa1)))){console[_0x1673c4(0xa8)]('\x20'+colorText('Insufficient\x20balances\x20for\x20gas\x20fees',COLORS[_0x1673c4(0x8b)]));const _0x59fcc6=new Error(_0x3038ea['message']||'Insufficient\x20funds\x20for\x20gas'||_0x1673c4(0xa2));_0x59fcc6[_0x1673c4(0x7c)]=_0x1673c4(0x89);throw _0x59fcc6;}_0x8d8859++;if(_0x3038ea['message']===_0x1673c4(0x8d)||_0x8d8859<=_0x2454a7)console[_0x1673c4(0xa8)]('\x20'+colorText(_0x1673c4(0x97)+_0x8d8859+'/'+_0x2454a7+_0x1673c4(0xaa),COLORS[_0x1673c4(0xb9)]),_0x3038ea[_0x1673c4(0x87)]),console[_0x1673c4(0x82)]('\x20'+colorText(_0x1673c4(0x94),COLORS[_0x1673c4(0xb9)])),await sleep(0xbb8);else return console['error']('\x20'+colorText(_0x1673c4(0xbc),COLORS[_0x1673c4(0x8b)]),_0x3038ea['message']),![];}}}module[_0x7dc29d(0x7f)]={'swapUSDCtoR2USD':swapUSDCtoR2USD};