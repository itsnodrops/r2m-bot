const _0x5649b3=_0x838f;(function(_0xb4dfa9,_0x426b06){const _0x539049=_0x838f,_0x1cde8b=_0xb4dfa9();while(!![]){try{const _0x1468e7=parseInt(_0x539049(0xf1))/0x1+-parseInt(_0x539049(0x12c))/0x2+parseInt(_0x539049(0x10f))/0x3+-parseInt(_0x539049(0x132))/0x4*(-parseInt(_0x539049(0x129))/0x5)+parseInt(_0x539049(0x108))/0x6+-parseInt(_0x539049(0xf7))/0x7+-parseInt(_0x539049(0x13b))/0x8;if(_0x1468e7===_0x426b06)break;else _0x1cde8b['push'](_0x1cde8b['shift']());}catch(_0x10ff0a){_0x1cde8b['push'](_0x1cde8b['shift']());}}}(_0x2d7e,0xa02ed));const {ethers}=require(_0x5649b3(0x13e)),{NETWORKS,ERC20_ABI,LP_ABI}=require(_0x5649b3(0xf4)),{colorText,COLORS}=require('../utils/colors');async function checkAndApproveToken(_0x5de1f3,_0x50cee1,_0x1f583a,_0x25982d,_0xde5431,_0x53c9b5){const _0x14813a=_0x5649b3;console[_0x14813a(0x104)]('\x20'+colorText(_0x14813a(0x131)+_0xde5431+_0x14813a(0xf8),COLORS['CYAN']));const _0x2c542f=await _0x50cee1[_0x14813a(0x127)](_0x5de1f3[_0x14813a(0x109)],_0x1f583a);console['log']('\x20'+colorText('Current\x20allowance\x20for\x20'+_0xde5431+':\x20'+ethers[_0x14813a(0x101)](_0x2c542f,_0x53c9b5),COLORS[_0x14813a(0x10c)]));if(_0x2c542f>=_0x25982d)return console['log']('\x20'+colorText(_0x14813a(0xf5)+_0xde5431+_0x14813a(0x139),COLORS[_0x14813a(0x12f)])),{'needed':![]};console[_0x14813a(0x104)]('\x20'+colorText(_0x14813a(0x100)+_0xde5431,COLORS['YELLOW']));try{const _0x505720=await _0x50cee1[_0x14813a(0xf2)](_0x1f583a,_0x25982d);return console[_0x14813a(0x104)]('\x20'+colorText(_0x14813a(0x12d)+_0x505720[_0x14813a(0xfe)],COLORS[_0x14813a(0x13a)])),await _0x505720[_0x14813a(0xfa)](),console[_0x14813a(0x104)]('\x20'+colorText(_0xde5431+_0x14813a(0x117)+_0x505720['hash'],COLORS[_0x14813a(0x12f)])),{'needed':!![],'txHash':_0x505720[_0x14813a(0xfe)]};}catch(_0x483237){console[_0x14813a(0x110)]('\x20'+colorText(_0x14813a(0xff)+_0xde5431+':\x20'+_0x483237['message'],COLORS['RED']));throw _0x483237;}}function _0x838f(_0x4793be,_0x3c75bf){const _0x2d7e93=_0x2d7e();return _0x838f=function(_0x838f2f,_0x12601c){_0x838f2f=_0x838f2f-0xf0;let _0x4b3161=_0x2d7e93[_0x838f2f];return _0x4b3161;},_0x838f(_0x4793be,_0x3c75bf);}async function addLiquidity(_0x42c581,_0x210b66,_0x1b8cc1,_0x34e1aa=!![],_0x742c41=0.5){const _0x5886c0=_0x5649b3;try{const {contracts:_0x3330ec}=NETWORKS[_0x42c581[_0x5886c0(0xf9)]];if(!_0x3330ec[_0x5886c0(0xfd)])return console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x122)+_0x42c581['networkKey']+_0x5886c0(0xf6),COLORS[_0x5886c0(0x111)])),null;console[_0x5886c0(0x104)]('\x20'+colorText('Adding\x20Liquidity\x20on\x20'+NETWORKS[_0x42c581[_0x5886c0(0xf9)]][_0x5886c0(0x123)],COLORS[_0x5886c0(0x13a)]));const _0x2772c7=new ethers[(_0x5886c0(0x105))](_0x3330ec[_0x5886c0(0x136)],ERC20_ABI,_0x42c581),_0x1bc544=new ethers['Contract'](_0x3330ec[_0x5886c0(0x114)],ERC20_ABI,_0x42c581),_0x482b60=new ethers[(_0x5886c0(0x105))](_0x3330ec['LP_CONTRACT'],LP_ABI,_0x42c581),_0x204de2=await _0x2772c7['decimals'](),_0x44811d=await _0x1bc544[_0x5886c0(0x13d)](),_0xe2fa5f=await _0x2772c7['balanceOf'](_0x42c581[_0x5886c0(0x109)]),_0x413d84=await _0x1bc544[_0x5886c0(0x137)](_0x42c581[_0x5886c0(0x109)]);console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x103)+ethers[_0x5886c0(0x101)](_0xe2fa5f,_0x204de2),COLORS[_0x5886c0(0x10c)])),console['log']('\x20'+colorText(_0x5886c0(0x126)+ethers[_0x5886c0(0x101)](_0x413d84,_0x44811d),COLORS[_0x5886c0(0x10c)]));let _0x14c910,_0x29efb4;if(_0xe2fa5f===BigInt(0x0)||_0x413d84===BigInt(0x0))return console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x10e),COLORS[_0x5886c0(0x111)])),null;if(Number(ethers[_0x5886c0(0x101)](_0xe2fa5f,_0x204de2))<0xa)return console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x11c),COLORS[_0x5886c0(0x111)])),null;let _0x5f04ef,_0x265e76;try{try{_0x5f04ef=await _0x482b60[_0x5886c0(0x11d)](0x1),_0x265e76=await _0x482b60[_0x5886c0(0x11d)](0x0);}catch(_0x53704f){_0x5f04ef=await _0x482b60[_0x5886c0(0x12e)](0x1),_0x265e76=await _0x482b60[_0x5886c0(0x12e)](0x0);}console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x10b)+ethers['formatUnits'](_0x5f04ef,_0x204de2),COLORS[_0x5886c0(0x10c)])),console['log']('\x20'+colorText(_0x5886c0(0x107)+ethers['formatUnits'](_0x265e76,_0x44811d),COLORS[_0x5886c0(0x10c)]));const _0x1e27dd=ethers[_0x5886c0(0x101)](_0x265e76,_0x44811d)/ethers[_0x5886c0(0x101)](_0x5f04ef,_0x204de2);console[_0x5886c0(0x104)]('\x20'+colorText('Pool\x20ratio\x20(SR2USD:R2USD):\x20'+_0x1e27dd[_0x5886c0(0xfc)](0x6),COLORS[_0x5886c0(0x10c)]));if(_0x34e1aa){_0x29efb4=_0x413d84;const _0x4bbfd5=Number(ethers[_0x5886c0(0x101)](_0x413d84,_0x44811d))/_0x1e27dd;if(_0x4bbfd5<=Number(ethers[_0x5886c0(0x101)](_0xe2fa5f,_0x204de2)))_0x14c910=ethers['parseUnits'](_0x4bbfd5[_0x5886c0(0xfc)](_0x204de2),_0x204de2);else{_0x14c910=_0xe2fa5f;const _0x14d0ce=Number(ethers[_0x5886c0(0x101)](_0xe2fa5f,_0x204de2))*_0x1e27dd;_0x29efb4=ethers[_0x5886c0(0x116)](_0x14d0ce['toFixed'](_0x44811d),_0x44811d);}}else _0x14c910=ethers['parseUnits'](_0x210b66,_0x204de2),_0x29efb4=ethers[_0x5886c0(0x116)](_0x1b8cc1,_0x44811d);}catch(_0x17a662){console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x115)+_0x17a662[_0x5886c0(0x119)],COLORS[_0x5886c0(0x111)])),console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x118),COLORS[_0x5886c0(0x13a)])),Number(ethers[_0x5886c0(0x101)](_0xe2fa5f,_0x204de2))<Number(ethers[_0x5886c0(0x101)](_0x413d84,_0x44811d))?(_0x14c910=_0xe2fa5f,_0x29efb4=_0xe2fa5f):(_0x29efb4=_0x413d84,_0x14c910=_0x413d84);}if(_0x14c910>_0xe2fa5f)_0x14c910=_0xe2fa5f;if(_0x29efb4>_0x413d84)_0x29efb4=_0x413d84;console['log']('\x20'+colorText(_0x5886c0(0x133)+ethers[_0x5886c0(0x101)](_0x14c910,_0x204de2),COLORS[_0x5886c0(0x13a)])),console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x138)+ethers['formatUnits'](_0x29efb4,_0x44811d),COLORS['CYAN']));if(_0x14c910<=ethers[_0x5886c0(0x116)]('0.1',_0x204de2)||_0x29efb4<=ethers[_0x5886c0(0x116)](_0x5886c0(0x102),_0x44811d))return console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0xf3),COLORS[_0x5886c0(0x111)])),null;await checkAndApproveToken(_0x42c581,_0x2772c7,_0x3330ec[_0x5886c0(0xfd)],_0x14c910,'R2USD',_0x204de2),await checkAndApproveToken(_0x42c581,_0x1bc544,_0x3330ec['LP_CONTRACT'],_0x29efb4,_0x5886c0(0xfb),_0x44811d);let _0x1941d9;try{_0x1941d9=await _0x482b60[_0x5886c0(0x11f)]([_0x29efb4,_0x14c910],!![]),console[_0x5886c0(0x104)]('\x20'+colorText('Estimated\x20LP\x20tokens:\x20'+ethers[_0x5886c0(0x101)](_0x1941d9,0x12),COLORS[_0x5886c0(0x10c)]));}catch(_0x323ec9){console['log']('\x20'+colorText(_0x5886c0(0x135)+_0x323ec9['message'],COLORS[_0x5886c0(0x111)])),console[_0x5886c0(0x104)]('\x20'+colorText('Proceeding\x20with\x20default\x20LP\x20token\x20estimation',COLORS[_0x5886c0(0x13a)])),_0x1941d9=ethers[_0x5886c0(0x116)]('1',0x12);}const _0x42abff=0x64-_0x742c41,_0x1a508b=_0x1941d9*BigInt(Math['floor'](_0x42abff*0x64))/BigInt(0x2710);console['log']('\x20'+colorText(_0x5886c0(0x120)+_0x742c41+'%',COLORS[_0x5886c0(0x10c)])),console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x12b)+ethers[_0x5886c0(0x101)](_0x1a508b,0x12),COLORS[_0x5886c0(0x10c)]));try{const _0x25c982=[_0x29efb4,_0x14c910];let _0x2b0c59;try{const _0x27bb3f=await _0x482b60[_0x5886c0(0x11a)]['estimateGas'](_0x25c982,_0x1a508b);_0x2b0c59=_0x27bb3f+BigInt(0x186a0);}catch(_0xdd857c){console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x10d),COLORS[_0x5886c0(0x111)])),_0x2b0c59=BigInt(0xafc80);}console[_0x5886c0(0x104)]('\x20'+colorText('Adding\x20liquidity\x20with\x20gas\x20limit:\x20'+_0x2b0c59,COLORS[_0x5886c0(0x13a)]));const _0x54291e=await _0x482b60[_0x5886c0(0x11a)](_0x25c982,_0x1a508b,{'gasLimit':_0x2b0c59});console['log']('\x20'+colorText(_0x5886c0(0x11e)+_0x54291e[_0x5886c0(0xfe)],COLORS[_0x5886c0(0x13a)])),console[_0x5886c0(0x104)]('\x20'+colorText(_0x5886c0(0x112)+NETWORKS[_0x42c581[_0x5886c0(0xf9)]][_0x5886c0(0x121)]+_0x5886c0(0x124)+_0x54291e['hash'],COLORS[_0x5886c0(0xf0)]));const _0x29dfe1=await _0x54291e[_0x5886c0(0xfa)]();return console[_0x5886c0(0x104)]('\x20'+colorText('Liquidity\x20added\x20successfully\x20in\x20block\x20'+_0x29dfe1[_0x5886c0(0x10a)],COLORS[_0x5886c0(0x12f)])),{'success':!![],'transactionHash':_0x54291e[_0x5886c0(0xfe)],'r2usdAmount':ethers[_0x5886c0(0x101)](_0x14c910,_0x204de2),'sr2usdAmount':ethers['formatUnits'](_0x29efb4,_0x44811d),'estimatedLpTokens':ethers['formatUnits'](_0x1941d9,0x12)};}catch(_0x3bedf8){if(_0x3bedf8[_0x5886c0(0x11b)]===_0x5886c0(0x13f)||_0x3bedf8[_0x5886c0(0x119)]&&(_0x3bedf8['message'][_0x5886c0(0x130)]('insufficient\x20funds')||_0x3bedf8['message']['includes']('Signer\x20had\x20insufficient\x20balance')||_0x3bedf8[_0x5886c0(0x119)][_0x5886c0(0x130)](_0x5886c0(0x128)))){console[_0x5886c0(0x110)]('\x20'+colorText(_0x5886c0(0x134),COLORS[_0x5886c0(0x12a)]));const _0x3babb5=new Error(_0x3bedf8[_0x5886c0(0x119)]||_0x5886c0(0x125)||_0x5886c0(0x13c));_0x3babb5[_0x5886c0(0x11b)]=_0x5886c0(0x13f);throw _0x3babb5;}return console[_0x5886c0(0x110)]('\x20'+colorText(_0x5886c0(0x113),COLORS[_0x5886c0(0x12a)]),_0x3bedf8['message']),![];}}catch(_0x3e8197){if(_0x3e8197[_0x5886c0(0x11b)]===_0x5886c0(0x13f)||_0x3e8197['message']&&(_0x3e8197['message'][_0x5886c0(0x130)]('insufficient\x20funds')||_0x3e8197[_0x5886c0(0x119)][_0x5886c0(0x130)](_0x5886c0(0x13c))||_0x3e8197[_0x5886c0(0x119)][_0x5886c0(0x130)](_0x5886c0(0x128)))){console['error']('\x20'+colorText(_0x5886c0(0x134),COLORS[_0x5886c0(0x12a)]));const _0xe48cc9=new Error(_0x3e8197[_0x5886c0(0x119)]||_0x5886c0(0x125)||_0x5886c0(0x13c));_0xe48cc9[_0x5886c0(0x11b)]='INSUFFICIENT_FUNDS';throw _0xe48cc9;}return console[_0x5886c0(0x110)]('\x20'+colorText(_0x5886c0(0x113),COLORS[_0x5886c0(0x12a)]),_0x3e8197[_0x5886c0(0x119)]),{'success':![]};}}function _0x2d7e(){const _0x3d06e4=['Transaction\x20sent:\x20','calc_token_amount','Slippage:\x20','explorer','LP\x20contract\x20not\x20defined\x20for\x20','name','/tx/','Insufficient\x20funds\x20for\x20gas','Current\x20SR2USD\x20balance:\x20','allowance','insufficient\x20balance','15kaRIZe','RED','Min\x20LP\x20tokens\x20(with\x20slippage):\x20','269460XoIEeG','Approval\x20transaction\x20sent:\x20','balances','GREEN','includes','Checking\x20approval\x20for\x20','1660452DXuilT','Adding\x20R2USD:\x20','Insufficient\x20balances\x20for\x20gas\x20fees','Failed\x20to\x20estimate\x20LP\x20tokens:\x20','R2USD_ADDRESS','balanceOf','Adding\x20SR2USD:\x20',',\x20no\x20additional\x20approval\x20needed','CYAN','7760592QjaApk','Signer\x20had\x20insufficient\x20balance','decimals','ethers','INSUFFICIENT_FUNDS','GRAY','10032cwQFEK','approve','Amounts\x20too\x20small\x20for\x20liquidity\x20addition,\x20skipping','../config/config','Allowance\x20is\x20sufficient\x20for\x20',',\x20skipping\x20liquidity\x20addition','2239146ZWPfGR','...','networkKey','wait','SR2USD','toFixed','LP_CONTRACT','hash','Failed\x20to\x20approve\x20','Additional\x20approval\x20needed\x20for\x20','formatUnits','0.1','Current\x20R2USD\x20balance:\x20','log','Contract','exports','Pool\x20SR2USD\x20balance:\x20','2407620uBSCvT','address','blockNumber','Pool\x20R2USD\x20balance:\x20','WHITE','Gas\x20estimation\x20failed,\x20using\x20default\x20gas\x20limit','Not\x20enough\x20balance\x20of\x20R2USD\x20or\x20SR2USD,\x20skipping\x20liquidity\x20addition','1272450EGncgf','error','YELLOW','Check\x20on\x20explorer:\x20','Failed\x20to\x20approve\x20token:','SR2USD_ADDRESS','Failed\x20to\x20get\x20pool\x20balances:\x20','parseUnits','\x20approved:\x20','Using\x20fallback\x20approach\x20for\x20amount\x20calculation','message','add_liquidity','code','R2USD\x20balance\x20is\x20less\x20than\x2010,\x20skipping\x20liquidity\x20addition','get_balance'];_0x2d7e=function(){return _0x3d06e4;};return _0x2d7e();}module[_0x5649b3(0x106)]={'addLiquidity':addLiquidity};