const _0x35e1a9=_0x2d99;(function(_0x57129b,_0x48b18a){const _0x540c37=_0x2d99,_0x518127=_0x57129b();while(!![]){try{const _0x4a8591=-parseInt(_0x540c37(0x1f6))/0x1+parseInt(_0x540c37(0x1e5))/0x2*(parseInt(_0x540c37(0x1f2))/0x3)+-parseInt(_0x540c37(0x1d8))/0x4+parseInt(_0x540c37(0x20a))/0x5+parseInt(_0x540c37(0x209))/0x6+-parseInt(_0x540c37(0x1d2))/0x7+parseInt(_0x540c37(0x1e8))/0x8*(parseInt(_0x540c37(0x1e9))/0x9);if(_0x4a8591===_0x48b18a)break;else _0x518127['push'](_0x518127['shift']());}catch(_0x31c9c5){_0x518127['push'](_0x518127['shift']());}}}(_0x153f,0xcaa83));const {ethers}=require(_0x35e1a9(0x213)),{NETWORKS,ERC20_ABI}=require(_0x35e1a9(0x1e3)),{checkBalance,approveToken,estimateGasFees}=require(_0x35e1a9(0x1cb)),{colorText,COLORS}=require('../utils/colors');async function stakeR2USD(_0x461dd4,_0x1e9014){const _0x27e168=_0x35e1a9,_0x55e88f=0x5,_0x38c837=0x7530;for(let _0x5ca94e=0x1;_0x5ca94e<=_0x55e88f;_0x5ca94e++){try{console[_0x27e168(0x21e)]('\x20'+colorText('Attempt\x20'+_0x5ca94e+'/'+_0x55e88f+_0x27e168(0x1d6),COLORS['GRAY']));const _0x498302=await Promise[_0x27e168(0x1fb)]([executeStakeR2USD(_0x461dd4,_0x1e9014),new Promise((_0x20a99a,_0x5bdd12)=>setTimeout(()=>_0x5bdd12(new Error(_0x27e168(0x214))),_0x38c837))]);return _0x498302;}catch(_0x1962ac){console[_0x27e168(0x21e)]('\x20'+colorText('Attempt\x20'+_0x5ca94e+'\x20failed:\x20'+_0x1962ac[_0x27e168(0x1fd)],COLORS[_0x27e168(0x1f0)]));const _0x2644df=_0x1962ac[_0x27e168(0x1f7)]==='INSUFFICIENT_FUNDS'||_0x1962ac[_0x27e168(0x1f7)]===_0x27e168(0x21b)||_0x1962ac[_0x27e168(0x1fd)]&&(_0x1962ac[_0x27e168(0x1fd)][_0x27e168(0x1ce)]('insufficient\x20funds')||_0x1962ac[_0x27e168(0x1fd)][_0x27e168(0x1ce)](_0x27e168(0x1d9))||_0x1962ac['message'][_0x27e168(0x1ce)](_0x27e168(0x1fe))||_0x1962ac[_0x27e168(0x1fd)][_0x27e168(0x1ce)](_0x27e168(0x203))||_0x1962ac[_0x27e168(0x1fd)][_0x27e168(0x1de)]()[_0x27e168(0x1ce)]('insufficient'))||_0x1962ac['reason']&&(_0x1962ac[_0x27e168(0x1dd)][_0x27e168(0x1ce)]('insufficient\x20funds')||_0x1962ac[_0x27e168(0x1dd)][_0x27e168(0x1ce)]('insufficient\x20balance'));if(_0x2644df){console[_0x27e168(0x217)]('\x20'+colorText('Insufficient\x20balance\x20for\x20gas\x20fees\x20or\x20token\x20amount',COLORS['RED']));const _0x5d6415=new Error(_0x1962ac[_0x27e168(0x1fd)]||_0x27e168(0x211));return _0x5d6415[_0x27e168(0x1f7)]=_0x27e168(0x1dc),![];}if(_0x5ca94e===_0x55e88f)return console['error']('\x20'+colorText(_0x27e168(0x1c8)+_0x55e88f+'\x20attempts\x20failed\x20for\x20staking',COLORS[_0x27e168(0x1f0)])),![];const _0x371cc9=Math[_0x27e168(0x1f8)](0x3e8*Math[_0x27e168(0x1d4)](0x2,_0x5ca94e-0x1),0x2710);console['log']('\x20'+colorText(_0x27e168(0x1e1)+_0x371cc9/0x3e8+'s\x20before\x20retry...',COLORS[_0x27e168(0x220)])),await new Promise(_0x1e7e6b=>setTimeout(_0x1e7e6b,_0x371cc9));}}}function _0x2d99(_0x14a41e,_0x26046f){const _0x153f49=_0x153f();return _0x2d99=function(_0x2d9935,_0xc81029){_0x2d9935=_0x2d9935-0x1c4;let _0x593e48=_0x153f49[_0x2d9935];return _0x593e48;},_0x2d99(_0x14a41e,_0x26046f);}async function executeStakeR2USD(_0x5e4cef,_0x55b059){const _0x592807=_0x35e1a9,{contracts:_0x3c250b}=NETWORKS[_0x5e4cef[_0x592807(0x1db)]];if(!ethers[_0x592807(0x215)](_0x3c250b[_0x592807(0x1ea)]))throw new Error(_0x592807(0x21c)+_0x3c250b[_0x592807(0x1ea)]);const _0x1e79f0=await checkBalance(_0x5e4cef,_0x3c250b['R2USD_ADDRESS']);console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x223)+_0x1e79f0,COLORS['WHITE']));const _0x52f3f6=await checkBalance(_0x5e4cef,_0x3c250b[_0x592807(0x1f3)]);console['log']('\x20'+colorText(_0x592807(0x1f1)+_0x52f3f6,COLORS[_0x592807(0x1da)]));const _0x25c98a=new ethers[(_0x592807(0x218))](_0x3c250b['R2USD_ADDRESS'],ERC20_ABI,_0x5e4cef),_0x17846a=await _0x25c98a[_0x592807(0x1d7)](),_0xe6e3f3=ethers['parseUnits'](_0x55b059[_0x592807(0x21f)](),_0x17846a),_0x110e79=ethers['toBeHex'](_0xe6e3f3,0x20),_0x55035e=await _0x25c98a[_0x592807(0x1ed)](_0x5e4cef[_0x592807(0x1cc)],_0x3c250b[_0x592807(0x1ea)]);console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x202)+ethers[_0x592807(0x1ca)](_0x55035e,_0x17846a),COLORS[_0x592807(0x200)]));if(_0x55035e<_0xe6e3f3){console['log']('\x20'+colorText(_0x592807(0x205)+_0x55b059+_0x592807(0x20b),COLORS[_0x592807(0x220)]));const _0x149293=await _0x25c98a[_0x592807(0x1e6)](_0x3c250b[_0x592807(0x1ea)],_0xe6e3f3,{'gasLimit':0x186a0});console['log']('\x20'+colorText(_0x592807(0x1cd)+_0x149293[_0x592807(0x1fa)],COLORS[_0x592807(0x1da)])),console[_0x592807(0x21e)]('\x20'+colorText('Check\x20on\x20explorer:\x20'+NETWORKS[_0x5e4cef[_0x592807(0x1db)]][_0x592807(0x1f4)]+_0x592807(0x1c6)+_0x149293['hash'],COLORS[_0x592807(0x200)])),await _0x149293[_0x592807(0x21d)](),console['log']('\x20'+colorText(_0x592807(0x1eb),COLORS['GREEN']));}else console[_0x592807(0x21e)]('\x20'+colorText('Sufficient\x20allowance\x20already\x20exists',COLORS[_0x592807(0x200)]));let _0x4a48a5;_0x5e4cef[_0x592807(0x1db)]===_0x592807(0x210)?_0x4a48a5=_0x3c250b[_0x592807(0x1d0)]+_0x110e79['slice'](0x2)+'0'[_0x592807(0x206)](0x140):_0x4a48a5=_0x3c250b[_0x592807(0x1d0)]+_0x110e79[_0x592807(0x1ff)](0x2)+'0'['repeat'](0x240);console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x20c)+_0x55b059+'\x20R2USD\x20to\x20sR2USD...',COLORS[_0x592807(0x220)]));const _0x29c9ed=await estimateGasFees(_0x5e4cef[_0x592807(0x1d1)],_0x5e4cef['networkKey']);let _0x59d0c0;_0x5e4cef[_0x592807(0x1db)]==='bscTestnet'?_0x59d0c0=await _0x5e4cef[_0x592807(0x1e7)]({'to':_0x3c250b[_0x592807(0x1ea)],'data':_0x4a48a5,'gasLimit':0x33450,'gasPrice':_0x29c9ed[_0x592807(0x1ef)],'type':0x0}):_0x59d0c0=await _0x5e4cef[_0x592807(0x1e7)]({'to':_0x3c250b[_0x592807(0x1ea)],'data':_0x4a48a5,'gasLimit':_0x5e4cef[_0x592807(0x1db)]===_0x592807(0x1e2)?0x33450:0x33450,..._0x29c9ed});console[_0x592807(0x21e)]('\x20'+colorText('Transaction\x20sent:\x20'+_0x59d0c0[_0x592807(0x1fa)],COLORS[_0x592807(0x1da)])),console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x1d5)+NETWORKS[_0x5e4cef[_0x592807(0x1db)]][_0x592807(0x1f4)]+_0x592807(0x1c6)+_0x59d0c0[_0x592807(0x1fa)],COLORS[_0x592807(0x200)]));const _0x12543c=await _0x59d0c0['wait']();if(_0x12543c[_0x592807(0x1ec)]===0x0)throw new Error(_0x592807(0x1e4));console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x20d),COLORS['GREEN']));const _0x18f004=await checkBalance(_0x5e4cef,_0x3c250b['R2USD_ADDRESS']),_0x41aebe=await checkBalance(_0x5e4cef,_0x3c250b[_0x592807(0x1f3)]);return console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x216)+_0x18f004,COLORS[_0x592807(0x1da)])),console[_0x592807(0x21e)]('\x20'+colorText(_0x592807(0x1f5)+_0x41aebe,COLORS[_0x592807(0x1da)])),!![];}async function stakeWBTC(_0x14639b,_0x104dbe){const _0x3f908d=_0x35e1a9,_0x58b3fe=0x5,_0x3dd0eb=0x7530;for(let _0x194e16=0x1;_0x194e16<=_0x58b3fe;_0x194e16++){try{console['log']('\x20'+colorText(_0x3f908d(0x21a)+_0x194e16+'/'+_0x58b3fe+_0x3f908d(0x20e),COLORS[_0x3f908d(0x200)]));const _0x5dddb4=await Promise[_0x3f908d(0x1fb)]([executeStakeWBTC(_0x14639b,_0x104dbe),new Promise((_0x2385d3,_0x42431d)=>setTimeout(()=>_0x42431d(new Error(_0x3f908d(0x214))),_0x3dd0eb))]);return _0x5dddb4;}catch(_0x430a5b){console[_0x3f908d(0x21e)]('\x20'+colorText(_0x3f908d(0x21a)+_0x194e16+_0x3f908d(0x1cf)+_0x430a5b[_0x3f908d(0x1fd)],COLORS[_0x3f908d(0x1f0)]));const _0x235998=_0x430a5b[_0x3f908d(0x1f7)]===_0x3f908d(0x1dc)||_0x430a5b[_0x3f908d(0x1f7)]===_0x3f908d(0x21b)||_0x430a5b['message']&&(_0x430a5b[_0x3f908d(0x1fd)][_0x3f908d(0x1ce)](_0x3f908d(0x204))||_0x430a5b[_0x3f908d(0x1fd)]['includes'](_0x3f908d(0x1d9))||_0x430a5b['message'][_0x3f908d(0x1ce)]('insufficient\x20balance')||_0x430a5b[_0x3f908d(0x1fd)][_0x3f908d(0x1ce)](_0x3f908d(0x203))||_0x430a5b[_0x3f908d(0x1fd)][_0x3f908d(0x1de)]()[_0x3f908d(0x1ce)](_0x3f908d(0x203)))||_0x430a5b[_0x3f908d(0x1dd)]&&(_0x430a5b[_0x3f908d(0x1dd)]['includes'](_0x3f908d(0x204))||_0x430a5b[_0x3f908d(0x1dd)][_0x3f908d(0x1ce)](_0x3f908d(0x1fe)));if(_0x235998){console[_0x3f908d(0x217)]('\x20'+colorText(_0x3f908d(0x1d3),COLORS[_0x3f908d(0x1f0)]));const _0x2474cd=new Error(_0x430a5b[_0x3f908d(0x1fd)]||_0x3f908d(0x211));return _0x2474cd[_0x3f908d(0x1f7)]=_0x3f908d(0x1dc),![];}if(_0x194e16===_0x58b3fe)return console[_0x3f908d(0x217)]('\x20'+colorText('All\x20'+_0x58b3fe+_0x3f908d(0x1c5),COLORS['RED'])),![];const _0x48fd66=Math[_0x3f908d(0x1f8)](0x3e8*Math[_0x3f908d(0x1d4)](0x2,_0x194e16-0x1),0x2710);console[_0x3f908d(0x21e)]('\x20'+colorText('Waiting\x20'+_0x48fd66/0x3e8+_0x3f908d(0x222),COLORS['YELLOW'])),await new Promise(_0x1872e7=>setTimeout(_0x1872e7,_0x48fd66));}}}async function executeStakeWBTC(_0x5f5569,_0x5413b4){const _0xa07f37=_0x35e1a9;if(_0x5f5569[_0xa07f37(0x1db)]!==_0xa07f37(0x208))return console[_0xa07f37(0x21e)]('\x20'+colorText('WBTC\x20staking\x20is\x20only\x20available\x20on\x20Sepolia\x20Testnet',COLORS[_0xa07f37(0x220)])),![];const {contracts:_0x2d1cab}=NETWORKS[_0x5f5569['networkKey']];if(!ethers['isAddress'](_0x2d1cab[_0xa07f37(0x1f9)]))throw new Error(_0xa07f37(0x1fc)+_0x2d1cab[_0xa07f37(0x1f9)]);const _0x52ade3=await checkBalance(_0x5f5569,_0x2d1cab[_0xa07f37(0x20f)]);console['log']('\x20'+colorText(_0xa07f37(0x1c4)+_0x52ade3,COLORS[_0xa07f37(0x1da)]));if(parseFloat(_0x52ade3)<parseFloat(_0x5413b4))return console['error']('\x20'+colorText('Insufficient\x20WBTC\x20balance.\x20You\x20have\x20'+_0x52ade3+_0xa07f37(0x201)+_0x5413b4+_0xa07f37(0x1df),COLORS[_0xa07f37(0x1f0)])),![];const _0x272a65=new ethers[(_0xa07f37(0x218))](_0x2d1cab[_0xa07f37(0x20f)],ERC20_ABI,_0x5f5569),_0x57eb5f=await _0x272a65['decimals'](),_0x27dcbc=ethers['parseUnits'](_0x5413b4[_0xa07f37(0x21f)](),_0x57eb5f),_0xbd4cb2=await approveToken(_0x5f5569,_0x2d1cab[_0xa07f37(0x20f)],_0x2d1cab[_0xa07f37(0x1f9)],_0x5413b4);if(!_0xbd4cb2)return![];console[_0xa07f37(0x21e)]('\x20'+colorText(_0xa07f37(0x20c)+_0x5413b4+'\x20WBTC...',COLORS[_0xa07f37(0x220)]));const _0x51d465=_0xa07f37(0x1c7),_0x534012=new ethers['AbiCoder']()[_0xa07f37(0x219)]([_0xa07f37(0x1cc),'uint256'],[_0x2d1cab[_0xa07f37(0x20f)],_0x27dcbc])[_0xa07f37(0x1ff)](0x2),_0x136e84=_0x51d465+_0x534012,_0x21dbfc=await estimateGasFees(_0x5f5569[_0xa07f37(0x1d1)]),_0x4495b2=await _0x5f5569[_0xa07f37(0x1e7)]({'to':_0x2d1cab[_0xa07f37(0x1f9)],'data':_0x136e84,'gasLimit':0x33450,..._0x21dbfc});console[_0xa07f37(0x21e)]('\x20'+colorText(_0xa07f37(0x221)+_0x4495b2[_0xa07f37(0x1fa)],COLORS[_0xa07f37(0x1da)])),console[_0xa07f37(0x21e)]('\x20'+colorText(_0xa07f37(0x1d5)+NETWORKS[_0x5f5569[_0xa07f37(0x1db)]][_0xa07f37(0x1f4)]+_0xa07f37(0x1c6)+_0x4495b2['hash'],COLORS[_0xa07f37(0x200)]));const _0x5bf28d=await _0x4495b2[_0xa07f37(0x21d)]();if(_0x5bf28d['status']===0x0)throw new Error(_0xa07f37(0x1e4));console[_0xa07f37(0x21e)]('\x20'+colorText(_0xa07f37(0x1c9),COLORS['GREEN']));const _0x436d3a=await checkBalance(_0x5f5569,_0x2d1cab[_0xa07f37(0x20f)]),_0x13ef87=await checkBalance(_0x5f5569,_0x2d1cab[_0xa07f37(0x1e0)]);return console['log']('\x20'+colorText(_0xa07f37(0x207)+_0x436d3a,COLORS[_0xa07f37(0x1da)])),console[_0xa07f37(0x21e)]('\x20'+colorText(_0xa07f37(0x212)+_0x13ef87,COLORS[_0xa07f37(0x1da)])),!![];}module[_0x35e1a9(0x1ee)]={'stakeR2USD':stakeR2USD,'stakeWBTC':stakeWBTC};function _0x153f(){const _0x342d8f=['Approval\x20transaction\x20sent:\x20','includes','\x20failed:\x20','STAKE_R2USD_METHOD_ID','provider','4154129pOmRHZ','Insufficient\x20balance\x20for\x20gas\x20fees\x20or\x20token\x20amount','pow','Check\x20on\x20explorer:\x20','\x20for\x20R2USD\x20staking','decimals','2804996TrAhLq','Signer\x20had\x20insufficient\x20balance','WHITE','networkKey','INSUFFICIENT_FUNDS','reason','toLowerCase','\x20WBTC.','R2WBTC_ADDRESS','Waiting\x20','arbitrumSepolia','../config/config','Transaction\x20failed.\x20The\x20contract\x20reverted\x20the\x20execution.','138rOtwUy','approve','sendTransaction','16qSepTv','740997qdUoms','STAKE_R2USD_CONTRACT','Approval\x20confirmed','status','allowance','exports','gasPrice','RED','Current\x20SR2USD\x20balance:\x20','51294Qlvvmi','SR2USD_ADDRESS','explorer','New\x20sR2USD\x20balance:\x20','545930fPlEZr','code','min','STAKE_BTC_CONTRACT','hash','race','Invalid\x20WBTC\x20staking\x20contract\x20address:\x20','message','insufficient\x20balance','slice','GRAY','\x20WBTC\x20but\x20trying\x20to\x20stake\x20','Current\x20R2USD\x20allowance\x20for\x20staking\x20contract:\x20','insufficient','insufficient\x20funds','Approving\x20','repeat','New\x20WBTC\x20balance:\x20','sepolia','7823088fMNpns','112165mnPWtp','\x20R2USD\x20for\x20staking\x20contract...','Staking\x20','Staking\x20confirmed!','\x20for\x20WBTC\x20staking','WBTC_ADDRESS','bscTestnet','Insufficient\x20funds\x20for\x20transaction','New\x20R2WBTC\x20balance:\x20','ethers','Timeout:\x20Operation\x20took\x20longer\x20than\x2030\x20seconds','isAddress','New\x20R2USD\x20balance:\x20','error','Contract','encode','Attempt\x20','-32000','Invalid\x20staking\x20contract\x20address:\x20','wait','log','toString','YELLOW','Transaction\x20sent:\x20','s\x20before\x20retry...','Current\x20R2USD\x20balance:\x20','Current\x20WBTC\x20balance:\x20','\x20attempts\x20failed\x20for\x20WBTC\x20staking','/tx/','0xadc9772e','All\x20','WBTC\x20Staking\x20confirmed!','formatUnits','./sign','address'];_0x153f=function(){return _0x342d8f;};return _0x153f();}