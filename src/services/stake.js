const _0x3d0b87=_0x14b6;(function(_0x147893,_0x2fb254){const _0x563af8=_0x14b6,_0x1fea68=_0x147893();while(!![]){try{const _0x21f896=parseInt(_0x563af8(0x182))/0x1*(-parseInt(_0x563af8(0x196))/0x2)+parseInt(_0x563af8(0x1be))/0x3*(-parseInt(_0x563af8(0x173))/0x4)+-parseInt(_0x563af8(0x1ab))/0x5*(parseInt(_0x563af8(0x168))/0x6)+-parseInt(_0x563af8(0x186))/0x7+-parseInt(_0x563af8(0x16a))/0x8+parseInt(_0x563af8(0x179))/0x9+-parseInt(_0x563af8(0x16e))/0xa*(-parseInt(_0x563af8(0x16b))/0xb);if(_0x21f896===_0x2fb254)break;else _0x1fea68['push'](_0x1fea68['shift']());}catch(_0x45ac00){_0x1fea68['push'](_0x1fea68['shift']());}}}(_0x5b71,0xe8b97));function _0x14b6(_0x1d99e4,_0x15762b){const _0x5b7199=_0x5b71();return _0x14b6=function(_0x14b689,_0x414e4b){_0x14b689=_0x14b689-0x15b;let _0x17bc5c=_0x5b7199[_0x14b689];return _0x17bc5c;},_0x14b6(_0x1d99e4,_0x15762b);}function _0x5b71(){const _0x212425=['4QjTsOs','Timeout:\x20Operation\x20took\x20longer\x20than\x2030\x20seconds','Signer\x20had\x20insufficient\x20balance','Check\x20on\x20explorer:\x20','code','uint256','GRAY','parseUnits','log','wait','reason','race','RED','Approving\x20','Current\x20WBTC\x20balance:\x20','New\x20R2USD\x20balance:\x20','ethers','SR2USD_ADDRESS','\x20WBTC...','Insufficient\x20WBTC\x20balance.\x20You\x20have\x20','STAKE_BTC_CONTRACT','286735SCpski','Current\x20R2USD\x20balance:\x20','provider','INSUFFICIENT_FUNDS','pow','address','Transaction\x20sent:\x20','\x20WBTC.','message','explorer','./sign','insufficient\x20balance','\x20attempts\x20failed\x20for\x20staking','encode','WBTC\x20Staking\x20confirmed!','decimals','YELLOW','Staking\x20','hash','44313punusM','formatUnits','Invalid\x20staking\x20contract\x20address:\x20','sendTransaction','approve','GREEN','Staking\x20confirmed!','-32000','error','gasPrice','allowance','sepolia','includes','networkKey','138KCyJtl','R2USD_ADDRESS','12965896fnnrkT','11EvJdtb','STAKE_R2USD_CONTRACT','WBTC_ADDRESS','57453210PcGmTR','All\x20','s\x20before\x20retry...','status','WBTC\x20staking\x20is\x20only\x20available\x20on\x20Sepolia\x20Testnet','428ybgLLW','Current\x20SR2USD\x20balance:\x20','New\x20WBTC\x20balance:\x20','slice','R2WBTC_ADDRESS','toLowerCase','10565028FPaZHQ','\x20for\x20R2USD\x20staking','isAddress','bscTestnet','Attempt\x20','insufficient','Approval\x20transaction\x20sent:\x20','arbitrumSepolia','0xadc9772e','224529xDPuYd','Contract','../config/config','New\x20R2WBTC\x20balance:\x20','6976907XizEcA','\x20failed:\x20','Transaction\x20failed.\x20The\x20contract\x20reverted\x20the\x20execution.','min','WHITE','/tx/','STAKE_R2USD_METHOD_ID','Waiting\x20','\x20WBTC\x20but\x20trying\x20to\x20stake\x20','Insufficient\x20funds\x20for\x20transaction','Current\x20R2USD\x20allowance\x20for\x20staking\x20contract:\x20','toString','Approval\x20confirmed','insufficient\x20funds','repeat','Invalid\x20WBTC\x20staking\x20contract\x20address:\x20'];_0x5b71=function(){return _0x212425;};return _0x5b71();}const {ethers}=require(_0x3d0b87(0x1a6)),{NETWORKS,ERC20_ABI}=require(_0x3d0b87(0x184)),{checkBalance,approveToken,estimateGasFees}=require(_0x3d0b87(0x1b5)),{colorText,COLORS}=require('../utils/colors');async function stakeR2USD(_0x664432,_0x304766){const _0x5d0358=_0x3d0b87,_0xd8213f=0x5,_0x412c44=0x7530;for(let _0x55d2d2=0x1;_0x55d2d2<=_0xd8213f;_0x55d2d2++){try{console[_0x5d0358(0x19e)]('\x20'+colorText('Attempt\x20'+_0x55d2d2+'/'+_0xd8213f+_0x5d0358(0x17a),COLORS[_0x5d0358(0x19c)]));const _0x23337f=await Promise[_0x5d0358(0x1a1)]([executeStakeR2USD(_0x664432,_0x304766),new Promise((_0x2115a4,_0x1fdfe1)=>setTimeout(()=>_0x1fdfe1(new Error(_0x5d0358(0x197))),_0x412c44))]);return _0x23337f;}catch(_0x24fa14){console[_0x5d0358(0x19e)]('\x20'+colorText(_0x5d0358(0x17d)+_0x55d2d2+_0x5d0358(0x187)+_0x24fa14['message'],COLORS[_0x5d0358(0x1a2)]));const _0x4d0b1b=_0x24fa14[_0x5d0358(0x19a)]===_0x5d0358(0x1ae)||_0x24fa14['code']===_0x5d0358(0x161)||_0x24fa14['message']&&(_0x24fa14[_0x5d0358(0x1b3)]['includes'](_0x5d0358(0x193))||_0x24fa14[_0x5d0358(0x1b3)][_0x5d0358(0x166)](_0x5d0358(0x198))||_0x24fa14['message'][_0x5d0358(0x166)](_0x5d0358(0x1b6))||_0x24fa14[_0x5d0358(0x1b3)][_0x5d0358(0x166)](_0x5d0358(0x17e))||_0x24fa14[_0x5d0358(0x1b3)][_0x5d0358(0x178)]()[_0x5d0358(0x166)](_0x5d0358(0x17e)))||_0x24fa14[_0x5d0358(0x1a0)]&&(_0x24fa14[_0x5d0358(0x1a0)]['includes']('insufficient\x20funds')||_0x24fa14[_0x5d0358(0x1a0)][_0x5d0358(0x166)]('insufficient\x20balance'));if(_0x4d0b1b){console['error']('\x20'+colorText('Insufficient\x20balance\x20for\x20gas\x20fees\x20or\x20token\x20amount',COLORS['RED']));const _0x2c108e=new Error(_0x24fa14[_0x5d0358(0x1b3)]||_0x5d0358(0x18f));return _0x2c108e['code']=_0x5d0358(0x1ae),![];}if(_0x55d2d2===_0xd8213f)return console['error']('\x20'+colorText(_0x5d0358(0x16f)+_0xd8213f+_0x5d0358(0x1b7),COLORS['RED'])),![];const _0x55a4dc=Math[_0x5d0358(0x189)](0x3e8*Math[_0x5d0358(0x1af)](0x2,_0x55d2d2-0x1),0x2710);console[_0x5d0358(0x19e)]('\x20'+colorText('Waiting\x20'+_0x55a4dc/0x3e8+_0x5d0358(0x170),COLORS[_0x5d0358(0x1bb)])),await new Promise(_0x22be6e=>setTimeout(_0x22be6e,_0x55a4dc));}}}async function executeStakeR2USD(_0x4ad75d,_0xa5c7f){const _0x3a62fe=_0x3d0b87,{contracts:_0x4ee726}=NETWORKS[_0x4ad75d[_0x3a62fe(0x167)]];if(!ethers[_0x3a62fe(0x17b)](_0x4ee726[_0x3a62fe(0x16c)]))throw new Error(_0x3a62fe(0x15c)+_0x4ee726[_0x3a62fe(0x16c)]);const _0xa3ed8e=await checkBalance(_0x4ad75d,_0x4ee726['R2USD_ADDRESS']);console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x1ac)+_0xa3ed8e,COLORS[_0x3a62fe(0x18a)]));const _0x392bf8=await checkBalance(_0x4ad75d,_0x4ee726[_0x3a62fe(0x1a7)]);console['log']('\x20'+colorText(_0x3a62fe(0x174)+_0x392bf8,COLORS[_0x3a62fe(0x18a)]));const _0x5aac39=new ethers[(_0x3a62fe(0x183))](_0x4ee726['R2USD_ADDRESS'],ERC20_ABI,_0x4ad75d),_0x1f4df5=await _0x5aac39[_0x3a62fe(0x1ba)](),_0x57657a=ethers[_0x3a62fe(0x19d)](_0xa5c7f['toString'](),_0x1f4df5),_0x98649f=ethers['toBeHex'](_0x57657a,0x20),_0x186883=await _0x5aac39[_0x3a62fe(0x164)](_0x4ad75d['address'],_0x4ee726[_0x3a62fe(0x16c)]);console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x190)+ethers[_0x3a62fe(0x15b)](_0x186883,_0x1f4df5),COLORS[_0x3a62fe(0x19c)]));if(_0x186883<_0x57657a){console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x1a3)+_0xa5c7f+'\x20R2USD\x20for\x20staking\x20contract...',COLORS[_0x3a62fe(0x1bb)]));const _0x857243=await _0x5aac39[_0x3a62fe(0x15e)](_0x4ee726['STAKE_R2USD_CONTRACT'],_0x57657a,{'gasLimit':0x186a0});console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x17f)+_0x857243['hash'],COLORS[_0x3a62fe(0x18a)])),console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x199)+NETWORKS[_0x4ad75d[_0x3a62fe(0x167)]][_0x3a62fe(0x1b4)]+_0x3a62fe(0x18b)+_0x857243['hash'],COLORS[_0x3a62fe(0x19c)])),await _0x857243[_0x3a62fe(0x19f)](),console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x192),COLORS[_0x3a62fe(0x15f)]));}else console['log']('\x20'+colorText('Sufficient\x20allowance\x20already\x20exists',COLORS[_0x3a62fe(0x19c)]));let _0x3789cd;_0x4ad75d[_0x3a62fe(0x167)]==='bscTestnet'?_0x3789cd=_0x4ee726[_0x3a62fe(0x18c)]+_0x98649f[_0x3a62fe(0x176)](0x2)+'0'[_0x3a62fe(0x194)](0x140):_0x3789cd=_0x4ee726[_0x3a62fe(0x18c)]+_0x98649f[_0x3a62fe(0x176)](0x2)+'0'[_0x3a62fe(0x194)](0x240);console['log']('\x20'+colorText(_0x3a62fe(0x1bc)+_0xa5c7f+'\x20R2USD\x20to\x20sR2USD...',COLORS['YELLOW']));const _0x31e859=await estimateGasFees(_0x4ad75d[_0x3a62fe(0x1ad)],_0x4ad75d['networkKey']);let _0x20ae68;_0x4ad75d[_0x3a62fe(0x167)]===_0x3a62fe(0x17c)?_0x20ae68=await _0x4ad75d[_0x3a62fe(0x15d)]({'to':_0x4ee726[_0x3a62fe(0x16c)],'data':_0x3789cd,'gasLimit':0x33450,'gasPrice':_0x31e859[_0x3a62fe(0x163)],'type':0x0}):_0x20ae68=await _0x4ad75d[_0x3a62fe(0x15d)]({'to':_0x4ee726[_0x3a62fe(0x16c)],'data':_0x3789cd,'gasLimit':_0x4ad75d[_0x3a62fe(0x167)]===_0x3a62fe(0x180)?0x33450:0x33450,..._0x31e859});console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x1b1)+_0x20ae68[_0x3a62fe(0x1bd)],COLORS['WHITE'])),console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x199)+NETWORKS[_0x4ad75d[_0x3a62fe(0x167)]][_0x3a62fe(0x1b4)]+_0x3a62fe(0x18b)+_0x20ae68['hash'],COLORS['GRAY']));const _0x754c4=await _0x20ae68[_0x3a62fe(0x19f)]();if(_0x754c4[_0x3a62fe(0x171)]===0x0)throw new Error(_0x3a62fe(0x188));console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x160),COLORS['GREEN']));const _0xb25ab=await checkBalance(_0x4ad75d,_0x4ee726[_0x3a62fe(0x169)]),_0x2fece2=await checkBalance(_0x4ad75d,_0x4ee726['SR2USD_ADDRESS']);return console[_0x3a62fe(0x19e)]('\x20'+colorText(_0x3a62fe(0x1a5)+_0xb25ab,COLORS['WHITE'])),console[_0x3a62fe(0x19e)]('\x20'+colorText('New\x20sR2USD\x20balance:\x20'+_0x2fece2,COLORS[_0x3a62fe(0x18a)])),!![];}async function stakeWBTC(_0x105c27,_0x10b573){const _0x447c46=_0x3d0b87,_0x5ac8df=0x5,_0x99aaa6=0x7530;for(let _0x19c9a1=0x1;_0x19c9a1<=_0x5ac8df;_0x19c9a1++){try{console['log']('\x20'+colorText(_0x447c46(0x17d)+_0x19c9a1+'/'+_0x5ac8df+'\x20for\x20WBTC\x20staking',COLORS[_0x447c46(0x19c)]));const _0x7520f0=await Promise[_0x447c46(0x1a1)]([executeStakeWBTC(_0x105c27,_0x10b573),new Promise((_0x28aeb5,_0x2bee34)=>setTimeout(()=>_0x2bee34(new Error('Timeout:\x20Operation\x20took\x20longer\x20than\x2030\x20seconds')),_0x99aaa6))]);return _0x7520f0;}catch(_0x31d83a){console[_0x447c46(0x19e)]('\x20'+colorText(_0x447c46(0x17d)+_0x19c9a1+_0x447c46(0x187)+_0x31d83a['message'],COLORS[_0x447c46(0x1a2)]));const _0x4e1545=_0x31d83a[_0x447c46(0x19a)]===_0x447c46(0x1ae)||_0x31d83a[_0x447c46(0x19a)]===_0x447c46(0x161)||_0x31d83a[_0x447c46(0x1b3)]&&(_0x31d83a[_0x447c46(0x1b3)][_0x447c46(0x166)]('insufficient\x20funds')||_0x31d83a[_0x447c46(0x1b3)][_0x447c46(0x166)]('Signer\x20had\x20insufficient\x20balance')||_0x31d83a[_0x447c46(0x1b3)][_0x447c46(0x166)](_0x447c46(0x1b6))||_0x31d83a[_0x447c46(0x1b3)][_0x447c46(0x166)](_0x447c46(0x17e))||_0x31d83a[_0x447c46(0x1b3)][_0x447c46(0x178)]()['includes'](_0x447c46(0x17e)))||_0x31d83a['reason']&&(_0x31d83a[_0x447c46(0x1a0)][_0x447c46(0x166)](_0x447c46(0x193))||_0x31d83a[_0x447c46(0x1a0)][_0x447c46(0x166)](_0x447c46(0x1b6)));if(_0x4e1545){console[_0x447c46(0x162)]('\x20'+colorText('Insufficient\x20balance\x20for\x20gas\x20fees\x20or\x20token\x20amount',COLORS[_0x447c46(0x1a2)]));const _0x1f9f59=new Error(_0x31d83a['message']||_0x447c46(0x18f));return _0x1f9f59[_0x447c46(0x19a)]='INSUFFICIENT_FUNDS',![];}if(_0x19c9a1===_0x5ac8df)return console[_0x447c46(0x162)]('\x20'+colorText(_0x447c46(0x16f)+_0x5ac8df+'\x20attempts\x20failed\x20for\x20WBTC\x20staking',COLORS[_0x447c46(0x1a2)])),![];const _0x4aa192=Math[_0x447c46(0x189)](0x3e8*Math['pow'](0x2,_0x19c9a1-0x1),0x2710);console[_0x447c46(0x19e)]('\x20'+colorText(_0x447c46(0x18d)+_0x4aa192/0x3e8+_0x447c46(0x170),COLORS['YELLOW'])),await new Promise(_0x219b9e=>setTimeout(_0x219b9e,_0x4aa192));}}}async function executeStakeWBTC(_0x4df848,_0x41a511){const _0x2dd640=_0x3d0b87;if(_0x4df848[_0x2dd640(0x167)]!==_0x2dd640(0x165))return console[_0x2dd640(0x19e)]('\x20'+colorText(_0x2dd640(0x172),COLORS['YELLOW'])),![];const {contracts:_0x151e98}=NETWORKS[_0x4df848['networkKey']];if(!ethers[_0x2dd640(0x17b)](_0x151e98[_0x2dd640(0x1aa)]))throw new Error(_0x2dd640(0x195)+_0x151e98[_0x2dd640(0x1aa)]);const _0xbb450a=await checkBalance(_0x4df848,_0x151e98[_0x2dd640(0x16d)]);console['log']('\x20'+colorText(_0x2dd640(0x1a4)+_0xbb450a,COLORS[_0x2dd640(0x18a)]));if(parseFloat(_0xbb450a)<parseFloat(_0x41a511))return console[_0x2dd640(0x162)]('\x20'+colorText(_0x2dd640(0x1a9)+_0xbb450a+_0x2dd640(0x18e)+_0x41a511+_0x2dd640(0x1b2),COLORS[_0x2dd640(0x1a2)])),![];const _0x3c7b55=new ethers[(_0x2dd640(0x183))](_0x151e98[_0x2dd640(0x16d)],ERC20_ABI,_0x4df848),_0x1cd4ef=await _0x3c7b55[_0x2dd640(0x1ba)](),_0x2b2856=ethers['parseUnits'](_0x41a511[_0x2dd640(0x191)](),_0x1cd4ef),_0x4646b9=await approveToken(_0x4df848,_0x151e98[_0x2dd640(0x16d)],_0x151e98[_0x2dd640(0x1aa)],_0x41a511);if(!_0x4646b9)return![];console[_0x2dd640(0x19e)]('\x20'+colorText(_0x2dd640(0x1bc)+_0x41a511+_0x2dd640(0x1a8),COLORS[_0x2dd640(0x1bb)]));const _0x36e4d9=_0x2dd640(0x181),_0x190ae7=new ethers['AbiCoder']()[_0x2dd640(0x1b8)]([_0x2dd640(0x1b0),_0x2dd640(0x19b)],[_0x151e98[_0x2dd640(0x16d)],_0x2b2856])[_0x2dd640(0x176)](0x2),_0x92a29f=_0x36e4d9+_0x190ae7,_0x1e3d2e=await estimateGasFees(_0x4df848[_0x2dd640(0x1ad)]),_0x279be1=await _0x4df848[_0x2dd640(0x15d)]({'to':_0x151e98[_0x2dd640(0x1aa)],'data':_0x92a29f,'gasLimit':0x33450,..._0x1e3d2e});console[_0x2dd640(0x19e)]('\x20'+colorText(_0x2dd640(0x1b1)+_0x279be1[_0x2dd640(0x1bd)],COLORS['WHITE'])),console['log']('\x20'+colorText('Check\x20on\x20explorer:\x20'+NETWORKS[_0x4df848[_0x2dd640(0x167)]]['explorer']+'/tx/'+_0x279be1[_0x2dd640(0x1bd)],COLORS[_0x2dd640(0x19c)]));const _0xb0a6a4=await _0x279be1[_0x2dd640(0x19f)]();if(_0xb0a6a4[_0x2dd640(0x171)]===0x0)throw new Error('Transaction\x20failed.\x20The\x20contract\x20reverted\x20the\x20execution.');console[_0x2dd640(0x19e)]('\x20'+colorText(_0x2dd640(0x1b9),COLORS[_0x2dd640(0x15f)]));const _0x56536e=await checkBalance(_0x4df848,_0x151e98[_0x2dd640(0x16d)]),_0x2e878c=await checkBalance(_0x4df848,_0x151e98[_0x2dd640(0x177)]);return console[_0x2dd640(0x19e)]('\x20'+colorText(_0x2dd640(0x175)+_0x56536e,COLORS[_0x2dd640(0x18a)])),console[_0x2dd640(0x19e)]('\x20'+colorText(_0x2dd640(0x185)+_0x2e878c,COLORS[_0x2dd640(0x18a)])),!![];}module['exports']={'stakeR2USD':stakeR2USD,'stakeWBTC':stakeWBTC};
