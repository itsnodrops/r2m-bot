const _0x33e73d=_0x42f3;(function(_0x2e762e,_0x407dbd){const _0xf1a550=_0x42f3,_0x52ff3f=_0x2e762e();while(!![]){try{const _0x4a9dd3=-parseInt(_0xf1a550(0xc0))/0x1*(parseInt(_0xf1a550(0xb7))/0x2)+-parseInt(_0xf1a550(0xbf))/0x3+-parseInt(_0xf1a550(0x99))/0x4*(parseInt(_0xf1a550(0x8a))/0x5)+parseInt(_0xf1a550(0xc2))/0x6*(-parseInt(_0xf1a550(0x92))/0x7)+-parseInt(_0xf1a550(0x98))/0x8*(-parseInt(_0xf1a550(0xc9))/0x9)+-parseInt(_0xf1a550(0xd1))/0xa*(parseInt(_0xf1a550(0xb1))/0xb)+parseInt(_0xf1a550(0xa2))/0xc;if(_0x4a9dd3===_0x407dbd)break;else _0x52ff3f['push'](_0x52ff3f['shift']());}catch(_0x354f06){_0x52ff3f['push'](_0x52ff3f['shift']());}}}(_0x55f8,0xa5053));const {ethers}=require(_0x33e73d(0xa8)),{NETWORKS,ERC20_ABI}=require(_0x33e73d(0x88)),{checkBalance,approveToken,estimateGasFees}=require(_0x33e73d(0xc3)),{colorText,COLORS}=require('../utils/colors');function _0x42f3(_0x3a37e9,_0x4232fb){const _0x55f8be=_0x55f8();return _0x42f3=function(_0x42f34b,_0x4bbe38){_0x42f34b=_0x42f34b-0x77;let _0x547cab=_0x55f8be[_0x42f34b];return _0x547cab;},_0x42f3(_0x3a37e9,_0x4232fb);}async function stakeR2USD(_0x35034c,_0x22d40c){const _0x500d15=_0x33e73d;try{const {contracts:_0x3a05aa}=NETWORKS[_0x35034c['networkKey']];if(!ethers['isAddress'](_0x3a05aa['STAKE_R2USD_CONTRACT']))throw new Error('Invalid\x20staking\x20contract\x20address:\x20'+_0x3a05aa[_0x500d15(0xd2)]);const _0x3d8c2b=await checkBalance(_0x35034c,_0x3a05aa[_0x500d15(0xa0)]);console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0x9f)+_0x3d8c2b,COLORS[_0x500d15(0xb6)]));const _0x57e3dd=await checkBalance(_0x35034c,_0x3a05aa[_0x500d15(0x86)]);console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xae)+_0x57e3dd,COLORS[_0x500d15(0xb6)]));const _0x417d0c=parseFloat(_0x3d8c2b),_0xde10ff=parseFloat(_0x57e3dd),_0x3d6ccb=_0x417d0c/(_0xde10ff||0.000001);if(_0x417d0c<=_0xde10ff)return console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xaa)+_0x417d0c+_0x500d15(0x7a)+_0xde10ff+_0x500d15(0x84),COLORS[_0x500d15(0x77)])),![];else{if(_0x3d6ccb<1.05)return console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xaa)+_0x417d0c+')\x20is\x20almost\x20equal\x20to\x20SR2USD\x20('+_0xde10ff+_0x500d15(0xce)+_0x3d6ccb[_0x500d15(0x97)](0x3)+_0x500d15(0x8e),COLORS[_0x500d15(0x77)])),![];}if(_0x417d0c<parseFloat(_0x22d40c))return console[_0x500d15(0x78)]('\x20'+colorText(_0x500d15(0xa6)+_0x3d8c2b+_0x500d15(0xa3)+_0x22d40c+_0x500d15(0x90),COLORS[_0x500d15(0xab)])),![];console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xa5)+_0x3d6ccb[_0x500d15(0x97)](0x3),COLORS[_0x500d15(0x82)]));const _0x5485b1=new ethers[(_0x500d15(0xad))](_0x3a05aa[_0x500d15(0xa0)],ERC20_ABI,_0x35034c),_0x34b4e4=await _0x5485b1[_0x500d15(0xb8)](),_0xd5fdc8=ethers[_0x500d15(0x91)](_0x22d40c[_0x500d15(0xaf)](),_0x34b4e4),_0x271d93=ethers['toBeHex'](_0xd5fdc8,0x20),_0x222ab3=await _0x5485b1['allowance'](_0x35034c[_0x500d15(0x83)],_0x3a05aa['STAKE_R2USD_CONTRACT']);console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xcf)+ethers[_0x500d15(0x9c)](_0x222ab3,_0x34b4e4),COLORS['GRAY']));if(_0x222ab3<_0xd5fdc8){console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0x7f)+_0x22d40c+_0x500d15(0xc8),COLORS['YELLOW']));const _0x4a656b=await _0x5485b1[_0x500d15(0x8d)](_0x3a05aa[_0x500d15(0xd2)],_0xd5fdc8,{'gasLimit':0x186a0});console['log']('\x20'+colorText(_0x500d15(0x9d)+_0x4a656b[_0x500d15(0xc6)],COLORS[_0x500d15(0xb6)])),console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xd5)+NETWORKS[_0x35034c[_0x500d15(0xa9)]]['explorer']+_0x500d15(0xd7)+_0x4a656b[_0x500d15(0xc6)],COLORS['GRAY'])),await _0x4a656b['wait'](),console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0x9b),COLORS['GREEN']));}else console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xd4),COLORS['GRAY']));const _0x531428=_0x3a05aa[_0x500d15(0x7c)]+_0x271d93[_0x500d15(0xa1)](0x2)+'0'[_0x500d15(0x8b)](0x240);console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xba)+_0x531428,COLORS[_0x500d15(0x93)])),console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0x81)+_0x22d40c+'\x20R2USD\x20to\x20sR2USD...',COLORS[_0x500d15(0x77)]));const _0x46d5e0=await estimateGasFees(_0x35034c['provider']),_0x2434c2=await _0x35034c[_0x500d15(0xbc)]({'to':_0x3a05aa[_0x500d15(0xd2)],'data':_0x531428,'gasLimit':_0x35034c[_0x500d15(0xa9)]===_0x500d15(0x94)?0x33450:0x33450,..._0x46d5e0});console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xb4)+_0x2434c2[_0x500d15(0xc6)],COLORS[_0x500d15(0xb6)])),console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xd5)+NETWORKS[_0x35034c[_0x500d15(0xa9)]][_0x500d15(0xb3)]+_0x500d15(0xd7)+_0x2434c2[_0x500d15(0xc6)],COLORS[_0x500d15(0x93)]));const _0x3dfa9e=await _0x2434c2[_0x500d15(0x87)]();if(_0x3dfa9e[_0x500d15(0x7e)]===0x0)throw new Error('Transaction\x20failed.\x20The\x20contract\x20reverted\x20the\x20execution.');console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xc5),COLORS[_0x500d15(0x89)]));const _0x58ef6c=await checkBalance(_0x35034c,_0x3a05aa['R2USD_ADDRESS']),_0x251456=await checkBalance(_0x35034c,_0x3a05aa[_0x500d15(0x86)]);return console[_0x500d15(0xcd)]('\x20'+colorText(_0x500d15(0xb2)+_0x58ef6c,COLORS[_0x500d15(0xb6)])),console[_0x500d15(0xcd)]('\x20'+colorText('New\x20sR2USD\x20balance:\x20'+_0x251456,COLORS[_0x500d15(0xb6)])),!![];}catch(_0x309545){if(_0x309545[_0x500d15(0xb5)]===_0x500d15(0x7d)||_0x309545[_0x500d15(0xd6)]&&(_0x309545[_0x500d15(0xd6)][_0x500d15(0xc4)](_0x500d15(0xd8))||_0x309545[_0x500d15(0xd6)]['includes'](_0x500d15(0x9e))||_0x309545['message']['includes'](_0x500d15(0xcb))))console[_0x500d15(0x78)]('\x20'+colorText(_0x500d15(0x8f),COLORS[_0x500d15(0xab)]));else _0x309545?.['error']&&typeof _0x309545['error']===_0x500d15(0xd3)?console[_0x500d15(0x78)]('\x20'+colorText(JSON[_0x500d15(0xbe)](_0x309545[_0x500d15(0x78)]),COLORS[_0x500d15(0xab)])):console[_0x500d15(0x78)]('\x20'+colorText(_0x500d15(0x79),COLORS[_0x500d15(0xab)]),_0x309545[_0x500d15(0xd6)]);return![];}}function _0x55f8(){const _0x545cc6=['GREEN','2355lTeALn','repeat','New\x20R2WBTC\x20balance:\x20','approve',',\x20skipping\x20staking','Insufficient\x20balances\x20for\x20gas\x20fees','\x20R2USD.','parseUnits','988687rdDhBN','GRAY','arbitrumSepolia','New\x20WBTC\x20balance:\x20','AbiCoder','toFixed','3944112JPTFfI','1172XRokgd','Insufficient\x20WBTC\x20balance.\x20You\x20have\x20','Approval\x20confirmed','formatUnits','Approval\x20transaction\x20sent:\x20','Signer\x20had\x20insufficient\x20balance','Current\x20R2USD\x20balance:\x20','R2USD_ADDRESS','slice','30829140uTjOdV','\x20R2USD\x20but\x20trying\x20to\x20stake\x20','WBTC\x20staking\x20is\x20only\x20available\x20on\x20Sepolia\x20and\x20Monad\x20Testnet','Proceeding\x20with\x20staking\x20-\x20ratio\x20of\x20R2USD\x20to\x20SR2USD\x20is\x20','Insufficient\x20R2USD\x20balance.\x20You\x20have\x20','Transaction\x20failed.\x20The\x20contract\x20reverted\x20the\x20execution.','ethers','networkKey','R2USD\x20(','RED','provider','Contract','Current\x20SR2USD\x20balance:\x20','toString','Current\x20WBTC\x20balance:\x20','118019KaEGZZ','New\x20R2USD\x20balance:\x20','explorer','Transaction\x20sent:\x20','code','WHITE','605534lwcwgS','decimals','\x20WBTC\x20but\x20trying\x20to\x20stake\x20','Constructed\x20data:\x20','WBTC_ADDRESS','sendTransaction','exports','stringify','3678594QOCeHh','1FlqCKU','\x20WBTC.','36GhkSPQ','./sign','includes','Staking\x20confirmed!','hash','WBTC\x20Staking\x20confirmed!','\x20R2USD\x20for\x20staking\x20contract...','18dTFbwd','encode','insufficient\x20balance','\x20WBTC...','log','),\x20ratio:\x20','Current\x20R2USD\x20allowance\x20for\x20staking\x20contract:\x20','isAddress','340OdQKel','STAKE_R2USD_CONTRACT','object','Sufficient\x20allowance\x20already\x20exists','Check\x20on\x20explorer:\x20','message','/tx/','insufficient\x20funds','YELLOW','error','Failed\x20to\x20stake\x20R2USD:',')\x20is\x20less\x20than\x20SR2USD\x20(','Failed\x20to\x20stake\x20wBTC:','STAKE_R2USD_METHOD_ID','INSUFFICIENT_FUNDS','status','Approving\x20','STAKE_BTC_CONTRACT','Staking\x20','CYAN','address','),\x20skipping\x20staking','R2WBTC_ADDRESS','SR2USD_ADDRESS','wait','../config/config'];_0x55f8=function(){return _0x545cc6;};return _0x55f8();}async function stakeWBTC(_0x47f82d,_0x55ea77){const _0x348132=_0x33e73d;try{if(_0x47f82d[_0x348132(0xa9)]!=='sepolia')return console[_0x348132(0xcd)]('\x20'+colorText(_0x348132(0xa4),COLORS[_0x348132(0x77)])),![];const {contracts:_0x291bc6}=NETWORKS[_0x47f82d[_0x348132(0xa9)]];if(!ethers[_0x348132(0xd0)](_0x291bc6[_0x348132(0x80)]))throw new Error('Invalid\x20WBTC\x20staking\x20contract\x20address:\x20'+_0x291bc6['STAKE_BTC_CONTRACT']);const _0x5a8a0a=await checkBalance(_0x47f82d,_0x291bc6[_0x348132(0xbb)]);console[_0x348132(0xcd)]('\x20'+colorText(_0x348132(0xb0)+_0x5a8a0a,COLORS[_0x348132(0xb6)]));if(parseFloat(_0x5a8a0a)<parseFloat(_0x55ea77))return console[_0x348132(0x78)]('\x20'+colorText(_0x348132(0x9a)+_0x5a8a0a+_0x348132(0xb9)+_0x55ea77+_0x348132(0xc1),COLORS[_0x348132(0xab)])),![];const _0x480db7=new ethers[(_0x348132(0xad))](_0x291bc6['WBTC_ADDRESS'],ERC20_ABI,_0x47f82d),_0x306a59=await _0x480db7[_0x348132(0xb8)](),_0x473797=ethers[_0x348132(0x91)](_0x55ea77[_0x348132(0xaf)](),_0x306a59),_0x45afdb=await approveToken(_0x47f82d,_0x291bc6['WBTC_ADDRESS'],_0x291bc6[_0x348132(0x80)],_0x55ea77);if(!_0x45afdb)return![];console[_0x348132(0xcd)]('\x20'+colorText(_0x348132(0x81)+_0x55ea77+_0x348132(0xcc),COLORS['YELLOW']));const _0x186bc6='0xadc9772e',_0xc8c620=new ethers[(_0x348132(0x96))]()[_0x348132(0xca)](['address','uint256'],[_0x291bc6['WBTC_ADDRESS'],_0x473797])[_0x348132(0xa1)](0x2),_0x42ef63=_0x186bc6+_0xc8c620,_0x215236=await estimateGasFees(_0x47f82d[_0x348132(0xac)]),_0x64e176=await _0x47f82d[_0x348132(0xbc)]({'to':_0x291bc6[_0x348132(0x80)],'data':_0x42ef63,'gasLimit':0x493e0,..._0x215236});console['log']('\x20'+colorText(_0x348132(0xb4)+_0x64e176[_0x348132(0xc6)],COLORS['WHITE'])),console[_0x348132(0xcd)]('\x20'+colorText(_0x348132(0xd5)+NETWORKS[_0x47f82d[_0x348132(0xa9)]][_0x348132(0xb3)]+_0x348132(0xd7)+_0x64e176['hash'],COLORS[_0x348132(0x93)]));const _0x408c4e=await _0x64e176[_0x348132(0x87)]();if(_0x408c4e[_0x348132(0x7e)]===0x0)throw new Error(_0x348132(0xa7));console['log']('\x20'+colorText(_0x348132(0xc7),COLORS[_0x348132(0x89)]));const _0x4d5a6a=await checkBalance(_0x47f82d,_0x291bc6[_0x348132(0xbb)]),_0x1f9f1c=await checkBalance(_0x47f82d,_0x291bc6[_0x348132(0x85)]);return console[_0x348132(0xcd)]('\x20'+colorText(_0x348132(0x95)+_0x4d5a6a,COLORS['WHITE'])),console[_0x348132(0xcd)]('\x20'+colorText(_0x348132(0x8c)+_0x1f9f1c,COLORS['WHITE'])),!![];}catch(_0x23fc5){return _0x23fc5[_0x348132(0xb5)]===_0x348132(0x7d)||_0x23fc5['message']&&(_0x23fc5[_0x348132(0xd6)][_0x348132(0xc4)](_0x348132(0xd8))||_0x23fc5[_0x348132(0xd6)][_0x348132(0xc4)]('Signer\x20had\x20insufficient\x20balance')||_0x23fc5[_0x348132(0xd6)]['includes']('insufficient\x20balance'))?console[_0x348132(0x78)]('\x20'+colorText(_0x348132(0x8f),COLORS['RED'])):console[_0x348132(0x78)]('\x20'+colorText(_0x348132(0x7b),COLORS['RED']),_0x23fc5[_0x348132(0xd6)]),![];}}module[_0x33e73d(0xbd)]={'stakeR2USD':stakeR2USD,'stakeWBTC':stakeWBTC};